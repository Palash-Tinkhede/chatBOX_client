import{j as e,r as o,Y as _,ag as J,m as X,u as Z,d as ee,ah as se,n as re,ai as oe,a9 as g,o as te,S as m,y as ae,W as ne,aj as ie,ak as le,O as ce,aa as me,al as de}from"./index-zPjSCOCx.js";import{A as pe}from"./AvatarCard-BB8MwDLT.js";import{U as ue}from"./UserItem-D5k4OaGu.js";import{b as h,a as xe,D as ge,B as he,M as je}from"./Menu-DWuWfxMD.js";import{c as j,T as x}from"./Typography-C2Y8IMQV.js";import{C as fe}from"./CircularProgress-Dy_aBEiq.js";import{B as y}from"./Modal-BfUPnkXy.js";import{M as u}from"./IconButton-LeyRasPx.js";import{M as be}from"./Tooltip-B1K8ChFn.js";import{T as Me}from"./TextField-D1Q6Ts3k.js";import{B as E}from"./Button-DG8RXmVZ.js";import{D as ve,A as De}from"./Delete-Bpp2loAV.js";import"./Menu-Do7zX5Rp.js";import"./Avatar-BqLqPN5c.js";import"./ListItem-Dp0NUzOO.js";import"./isMuiElement-DHVOMEXX.js";const Ie=j(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),ke=j(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Ce=j(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),Ge=o.lazy(()=>_(()=>import("./ConfirmDeleteDialog-CDTNvxqM.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Le=o.lazy(()=>_(()=>import("./AddMemberDialog-DEG50fMc.js"),__vite__mapDeps([7,1,8,9,4,3,10,11,5,12,13,14,2,6]))),Ke=()=>{var G,L;const s=J()[0].get("group"),a=X(),l=Z(),{isAddMember:n}=ee(r=>r.misc),t=se(""),i=re({chatId:s,populate:!0},{skip:!s}),[A,f]=h(ie),[B,w]=h(le),[N,Ee]=h(ce),[z,b]=o.useState(!1),[R,d]=o.useState(!1),[M,v]=o.useState(!1),[D,p]=o.useState(""),[I,c]=o.useState(""),[H,k]=o.useState([]),T=[{isError:t.isError,error:t.error},{isError:i.isError,error:i.error}];xe(T),o.useEffect(()=>{const r=i.data;return r&&(p(r.chat.name),c(r.chat.name),k(r.chat.members)),()=>{p(""),c(""),k([]),d(!1)}},[i.data]);const U=()=>{a("/")},F=()=>{b(r=>!r)},O=()=>b(!1),P=()=>{d(!1),A("Updating Group Name...",{chatId:s,name:I})},V=()=>{v(!0)},C=()=>{v(!1)},$=()=>{l(de(!0))},K=()=>{N("Deleting Group...",s),C(),a("/groups")},Q=r=>{B("Removing Member...",{chatId:s,userId:r})};o.useEffect(()=>(s&&(p(`Group Name ${s}`),c(`Group Name ${s}`)),()=>{p(""),c(""),d(!1)}),[s]);const W=e.jsxs(e.Fragment,{children:[e.jsx(he,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(u,{onClick:F,children:e.jsx(je,{})})}),e.jsx(be,{title:"back",children:e.jsx(u,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:me,color:"white",":hover":{bgcolor:"rgba(0,0,0,0.7)"}},onClick:U,children:e.jsx(Ce,{})})})]}),Y=e.jsx(m,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"3rem",children:R?e.jsxs(e.Fragment,{children:[e.jsx(Me,{value:I,onChange:r=>c(r.target.value)}),e.jsx(u,{onClick:P,disabled:f,children:e.jsx(Ie,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h4",children:D}),e.jsx(u,{disabled:f,onClick:()=>d(!0),children:e.jsx(ke,{})})]})}),q=e.jsxs(m,{direction:{xs:"column-reverse",sm:"row"},spacing:"1rem",p:{xs:"0",sm:"1rem",md:"1rem 4rem"},children:[e.jsx(E,{size:"large",color:"error",startIcon:e.jsx(ve,{}),onClick:V,children:"Delete Group"}),e.jsx(E,{size:"large",variant:"contained",startIcon:e.jsx(De,{}),onClick:$,children:"Add Member"})]});return t.isLoading?e.jsx(oe,{}):e.jsxs(g,{container:!0,height:"100vh",children:[e.jsx(g,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,children:e.jsx(S,{myGroups:(G=t==null?void 0:t.data)==null?void 0:G.groups,chatId:s})}),e.jsxs(g,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem",bgcolor:te},children:[W,D&&e.jsxs(e.Fragment,{children:[Y,e.jsx(x,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(m,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:w?e.jsx(fe,{}):H.map(r=>e.jsx(ue,{user:r,isAdded:!0,styling:{boxShadow:"0 0 0.5rem  rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:Q},r._id))}),q]})]}),n&&e.jsx(o.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(Le,{chatId:s})}),M&&e.jsx(o.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(Ge,{open:M,handleClose:C,deleteHandler:K})}),e.jsx(ge,{sx:{display:{xs:"block",sm:"none"}},open:z,onClose:O,children:e.jsx(S,{w:"50vw",myGroups:(L=t==null?void 0:t.data)==null?void 0:L.groups,chatId:s})})]})},S=({w:s="100%",myGroups:a=[],chatId:l})=>e.jsx(m,{width:s,sx:{bgcolor:ae,height:"100vh",overflow:"auto"},children:a.length>0?a.map(n=>e.jsx(ye,{group:n,chatId:l},n._id)):e.jsx(x,{textAlign:"center",padding:"1rem",children:"No groups"})}),ye=o.memo(({group:s,chatId:a})=>{const{name:l,avatar:n,_id:t}=s;return e.jsx(ne,{to:`?group=${t}`,onClick:i=>{a===t&&i.preventDefault()},children:e.jsxs(m,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(pe,{avatar:n}),e.jsx(x,{children:l})]})})});export{Ke as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ConfirmDeleteDialog-CDTNvxqM.js","assets/index-zPjSCOCx.js","assets/DialogTitle-BfrIC0ug.js","assets/Modal-BfUPnkXy.js","assets/Menu-Do7zX5Rp.js","assets/Typography-C2Y8IMQV.js","assets/Button-DG8RXmVZ.js","assets/AddMemberDialog-DEG50fMc.js","assets/UserItem-D5k4OaGu.js","assets/ListItem-Dp0NUzOO.js","assets/isMuiElement-DHVOMEXX.js","assets/Avatar-BqLqPN5c.js","assets/IconButton-LeyRasPx.js","assets/Delete-Bpp2loAV.js","assets/Menu-DWuWfxMD.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
